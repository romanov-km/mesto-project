(()=>{"use strict";var e=function(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove(n.inactiveButtonClass)):(t.disabled=!0,t.classList.add(n.inactiveButtonClass))},t=document.querySelector(".elements__list"),n=document.querySelector(".img-popup"),r=document.querySelector('#form-add-card input[name="url"]'),o=document.querySelector('#form-add-card input[name="name"]'),c=document.querySelector(".add-popup"),u=document.querySelector(".img-popup__image"),d=document.querySelector(".img-popup__title");function i(e){document.addEventListener("keydown",l),e.classList.add("popup_opened")}function a(e){document.addEventListener("keydown",l),e.classList.remove("popup_opened")}var l=function(e){"Escape"===e.key&&document.querySelector(".popup_opened")&&a(document.querySelector(".popup_opened"))};function s(e){var t=e.name,n=e.link,r=document.querySelector("#card").content.querySelector(".elements__item").cloneNode(!0),o=r.querySelector(".elements__button-delete"),c=r.querySelector(".elements__image");return o.addEventListener("click",p),c.src=n,c.alt=t,r.querySelector(".elements__title").textContent=t,r.querySelector(".elements__button-like").addEventListener("click",f),c.addEventListener("click",_),r}function p(e){e.target.closest("li").remove()}document.addEventListener("click",(function(e){a(e.target)}));var m,_=function(e){!function(e){u.src=e.target.src,u.alt=e.target.alt,d.textContent=e.target.alt}(e),i(n)},f=function(e){e.target.classList.toggle("elements__button-like_active")},v=document.querySelector(".profile-popup"),y=document.querySelector(".add-popup"),S=document.querySelector(".profile__edit-button"),q=document.querySelector(".popup__closed-button"),k=document.querySelector(".profile__add-button"),L=document.querySelector(".add-popup__closed-button"),g=document.querySelector("#form-edit-profile"),E=document.querySelector("#form-add-card"),b=document.querySelector(".img-popup__closed-button"),C=document.querySelector(".img-popup"),x=document.querySelector('#form-edit-profile input[name="name"]'),h=document.querySelector('#form-edit-profile input[name="activity"]'),j=document.querySelector(".profile__name"),A=document.querySelector(".profile__activity");m={formSelector:".add-popup__form",inputSelector:".add-popup__text-input",submitButtonSelector:".add-popup__submit",inactiveButtonClass:"add-popup__submit_inactive",inputErrorClass:"add-popup__text-input_type_error",errorClass:"add-popup__input-error_active"},Array.from(document.querySelectorAll(m.formSelector)).forEach((function(t){t.addEventListener("submit",(function(e){e.preventDefault()})),function(t,n){var r=Array.from(t.querySelectorAll(n.inputSelector)),o=t.querySelector(n.submitButtonSelector);e(r,o,n),r.forEach((function(c){c.addEventListener("input",(function(){!function(e,t,n){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(n.inputErrorClass),r.classList.remove(n.errorClass),r.textContent=""}(e,t,n):function(e,t,n,r){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add(r.inputErrorClass),o.textContent=n,o.classList.add(r.errorClass)}(e,t,t.validationMessage,n)}(t,c,n),e(r,o,n)}))}))}(t,m)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){t.append(s(e))})),S.addEventListener("click",(function(){i(v),x.value=j.textContent,h.value=A.textContent})),q.addEventListener("click",(function(){a(v)})),k.addEventListener("click",(function(){var e;i(y),E.reset(),(e=document.querySelector(".add-popup__submit")).disabled=!0,e.classList.add("add-popup__submit_inactive")})),L.addEventListener("click",(function(){var e,t;a(y),t=(e=y).querySelectorAll(".add-popup__text-input"),e.querySelectorAll(".add-popup__input-error").forEach((function(e){e.textContent=""})),t.forEach((function(e){e.classList.remove("add-popup__text-input_type_error")}))})),g.addEventListener("submit",(function(e){e.preventDefault(),j.textContent=x.value,A.textContent=h.value,a(v)})),b.addEventListener("click",(function(){a(C)})),E.addEventListener("submit",(function(e){e.preventDefault();var n={name:o.value,link:r.value};t.prepend(s(n)),a(c)}))})();